#
# $Id$
# $Source$
#
begin protocol specification
	specification name "vicebox"
	specification type "TCP"
	off string "0"
	on string  "1"
	plug count 10
	device timeout 100.0
	begin LOGIN_SCRIPT
		expect "V2\.2\r\n"
		send "auth password\r\n"
		expect "OK\r\n"
	end LOGIN_SCRIPT
	begin LOGOUT_SCRIPT
		send "q\r\n"
	end LOGOUT_SCRIPT
	begin STATUS_ALL_SCRIPT
		send "ps *\r\n"
		expect "N1:([01]) N2:([01]) N3:([01]) N4:([01]) N5:([01]) N6:([01]) N7:([01]) N8:([01]) N9:([01]) N10:([01])[[:space:]]*\r\n"
			map $1 "1"
			map $2 "2"
			map $3 "3"
			map $4 "4"
			map $5 "5"
			map $6 "6"
			map $7 "7"
			map $8 "8"
			map $9 "9"
			map $10 "10"
	end STATUS_ALL_SCRIPT
	begin STATUS_SOFT_ALL_SCRIPT
		send "ns *\r\n"
		expect "N1:([01]) N2:([01]) N3:([01]) N4:([01]) N5:([01]) N6:([01]) N7:([01]) N8:([01]) N9:([01]) N10:([01])[[:space:]]*\r\n"
			map $1 "1"
			map $2 "2"
			map $3 "3"
			map $4 "4"
			map $5 "5"
			map $6 "6"
			map $7 "7"
			map $8 "8"
			map $9 "9"
			map $10 "10"
	end STATUS_SOFT_ALL_SCRIPT
	begin ON_SCRIPT
		send "ph %s\r\n"
		expect "OK\r\n"
	end ON_SCRIPT
	begin ON_ALL_SCRIPT
		send "ph *\r\n"
		expect "OK\r\n"
	end ON_ALL_SCRIPT
	begin OFF_SCRIPT
		send "pl %s\r\n"
		expect "OK\r\n"
	end OFF_SCRIPT
	begin OFF_ALL_SCRIPT
		send "pl %s\r\n"
		expect "OK\r\n"
	end OFF_ALL_SCRIPT
	begin CYCLE_SCRIPT
		send "pl %s\r\n"
		expect "OK\r\n"
		send "ph %s\r\n"
		expect "OK\r\n"
	end CYCLE_SCRIPT
	begin CYCLE_ALL_SCRIPT
		send "pl *\r\n"
		expect "OK\r\n"
		send "ph *\r\n"
		expect "OK\r\n"
	end CYCLE_ALL_SCRIPT
	begin RESET_SCRIPT
		send "rp %s\r\n"
		expect "OK\r\n"
	end RESET_SCRIPT
	begin RESET_ALL_SCRIPT
		send "rp *\r\n"
		expect "OK\r\n"
	end RESET_ALL_SCRIPT
	plug name "1"
	plug name "2"
	plug name "3"
	plug name "4"
	plug name "5"
	plug name "6"
	plug name "7"
	plug name "8"
	plug name "9"
	plug name "10"
end protocol specification
