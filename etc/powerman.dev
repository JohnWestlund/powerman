#
# $Id$
#
# PowerMan script for controlling another PowerMan daemon.
#
# N.B. allow 'client' to configure a subset of 'server' plugs
#
specification "powerman" {
	timeout 	100.0

	script login {
		expect "powerman> "
		send "exprange\r\n"
		expect "105 Hostrange expansion ON\r\npowerman> "
	}
	script logout {
		send "quit\r\n"
	}
	script status {
		send "status %s\r\n"
		expect "303 ([^:]+): (off|on|unknown)\r\n"
		setplugstate $1 $2 off="off" on="on"
		expect "powerman> "
	}
	script on {
		send "on %s\r\n"
		expect "powerman> "
	}
	script on_ranged {
		send "on %s\r\n"
		expect "powerman> "
	}
	script off {
		send "off %s\r\n"
		expect "powerman> "
	}
	script off_ranged {
		send "off %s\r\n"
		expect "powerman> "
	}
	script cycle {
		send "cycle %s\r\n"
		expect "powerman> "
	}
	script cycle_ranged {
		send "cycle %s\r\n"
		expect "powerman> "
	}
	script reset {
		send "reset %s\r\n"
		expect "powerman> "
	}
	script reset_ranged {
		send "reset %s\r\n"
		expect "powerman> "
	}
}
