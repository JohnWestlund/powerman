PowerMan version 1.0.17                                        26 April 2003

+--------------+
| New Features |
+--------------+

o There is now a telnet option processor which filters telnet escapes out of
  the device control stream and manages some trivial option negotiation.
  Literal telnet escape sequences have been removed from device configurations.

o For devices which dynamically assign "plug names" it is now possible to 
  omit the plug name from the node lines in powerman.conf, and leave off 
  the definition of all possible plug names in the device config.  A new 
  script construct "setplugname" can be used to associate plug names with 
  node names during script execution.

o To make it possible to support devices that have variable numbers of plugs
  PowerMan scripts can now utilize a "foreachplug" or "foreachnode" construct 
  to iterate over the configured plugs or plugs that have configured nodes for
  a device, executing an inner block of script on each iteration.  These
  constructs also reduce repetition in scripts with a fixed number of plugs.

o Support added for IBM RSA Remote Supervisor Adapter in telnet debug mode.
  The ibmrsa.dev script utilizes the three features listed above.

o For devices that have only a command to toggle power, PowerMan now supports
  the conditionals "ifon" and "ifoff" which will execute a subblock of script
  if the plug is on or off respectively.

o Support added for Rackable Systems Phantom Remote Management Module.
  The phantom.dev script utilizes the ifon/ifoff feature above.

o In addition to the new constructs described above, the device script syntax
  has changed in the following non-backwards compatible way:
  - Instead of repeating 'plug name "name"' statements, all the plug names
    can now be specified on one line, e.g. 'plug name { "name" "name" ... }.
  - The plugcount line is no longer necessary (or allowed).
  - The name line is no longer necessary; device names are specified between
    "specification" and the open brace for the device specification.
  - The "map" command was renamed to "setplugstate" and there can now be
    intervening statements between an "expect" and "setplugstate" lines.  
    Subexpression match lines persist until the next "expect" in the script.
  - The "setplugstate" command can now take either subexpression number for 
    the plug name parameter or a literal plug name (quoted string).
  - The "onstring" and "offstring" constructs are replaced with off="regex"/
    on="regex" arguments to "setplugstate".
  - Devices no longer have a "type".  This is deduced from the "hostname"
    field for the device in the powerman.conf.  If it starts with a slash
    it is treated as a special file, otherwise tcp.  Telnet mode is always
    on even for serial devices, which should be harmless.

o Devices specified in powerman.conf now should combine the host and port
  in the hostname field, e.g. "hostname:port".  What was the port field is
  now "flags" reserved for future use.  If a ":port" is not found in the
  hostname field, the port is taken from the flags field and a warning about
  deprecated usage is emitted to stdout.

o Supported added for Baytech RPC-28-30NC remote power controller.

+------------+
| Bugs fixed |
+------------+

o Increased power cycle time to 2 seconds on all power controllers.  The
  ICE box previous value of 0.7 sec caused problems on some nodes.

o Serial connections were made non-blocking (blocking in an open would
  hang powermand).

o Workaround for getaddrinfo bug in glibc-2.3.2-27.9 that caused client
  core dumps under RedHat 9.

+-----------------+
| Supported RPC's |
+-----------------+

PowerMan development and testing takes place on the following RPC devices:

o Linux NetworX ICE Box version 2 (V2.2-LLNL B208) (*)

o Linux NetworX ICE Box version 3 (V3.0 B70) (*)

o Baytech RPC-3 (Revision F 5.00 and F 5.01) (*)

o Baytech RPC-28-30NC

o WTI NPS (v3.02)

o WTI RPS-10

o APC MasterSwitch Plus (APP v2.0.0 / AOS v2.5.4)

o IBM RSA Remote Supervisor Adapter (T2ET16- for x335, GEET117A for x345) (*)

o Rackable Systems Phantom Remote Management Module (v3.0.4)


Devices marked with an asterisk (*) are deployed on LLNL production clusters 
of substantial size.

+-------------+
| Other Notes |
+-------------+

For further information, refer to man pages and the source.
The contents of the doc directory are useful in understanding the basic 
design of PowerMan but the code and data structures have changed 
substantially since that information was created.
