####################################################################
# $Id$
# by Andrew C. Uselton <uselton2@llnl.gov> 
# Copyright (C) 2000 Regents of the University of California
# See ./DISCLAIMER
# v. 0-1-0:  2001-08-28
#            Initial Python embodiment of the PowerMan project
#            see "usage" for protoytpe
# Changes from 0-1-0 tagging:
# 1)  $POWERMANCONF environment variable was appended to $POWERMANDIR
#     rather than searched independently.  Now it is treated as an
#     independent relative or absolute path.
# v. 0-1-1:  2001-08-31
#            renovation in support of rpm builds
# v. 0-1-2:  2001-09-05
#            make targets no longer (necessarily) need root
#            priveleges, and no longer check.  suid of digi
#            now happens in RPM post install sript
#            Add the Post Install step setting digi to suid root
# v. 0-1-3:  2001-09-05
#            Update version to current value
# v. 0-1-4:  2001-09-05
#            Fix man page references so they can be ".1" or ".1.gz"
#            Make powerman/etc/*.conf be "noreplace" config files
# v. 0-1-5:  2001-09-05
# v. 0-1-6:  2001-09-07
#            add icebox and make a few changes to the code
#            no longer use src/digi.c, since there's a Python version
#            no more bitmap mode.  Must be root now.
#            digi is no longer suid root
#            replace -v verbose with -q quiet
# v. 0-1-7:  2001-09-17
#            Change the behavior of unfull iceboxes such that the
#            collective operation is not called, thus only a request
#            for ten of ten ports will invoke the collective
#            command.
#            Fixed a bug in which more than one readline() is
#            necessary before a query's response arrives.
#    Release 3:
#                PowerMan now issues commands without regard to the 
#       current state of the target nodes, with the exception of the 
#	etherwake device.  For the etherwake device the node must
#	be off before it is turned on, or must be on before it is 
#	turned off or reset.  Reset of an off etherwake node still
#	does not turn it on.
#	         The icebox device now prints its replies in sorted
#	order.  The sort is by tty, then box, then port and the order
#	within those categories is established by the first appearance 
#	in the config file.  
#	         The icebox driver now has two pacing constants, one for
#	per-box commands (4.0 seconds), and one for per-port commands
#	(1.0 seconds).  Commands are issued no more quickly than this 
#	pace.
#	         The error handling is more uniform, with an "exit_error"
#	function and standard error messages declared all in one place.
#	         The icebox driver logs the most recent command and
#	response to the file #powermandir/log/log_file.
#	         The reply from the icebox can be empty and the driver will
#	read again, up to 10 times before failing.  
#    Release 4:
#                Unified Makefile into a single file in the root 
#	directory of the distribution.
#	         Removed all Changelog and version information from
#	all files except pm, Makefile, and powerman.spec.
#	         Removed all but the main Makefile and from cvs         
# v. 0-1-8:  2001-09-20
#	         Update to IceBox module to accomodate infelicities 
#	in the serial line protocol.  In particular, some iceboxes 
#	end a line with "\n\n" and later ones with "\r\n".  
#    Release 2:
#	         Implemented a fullfeatured logging system to help 
#	with diagnosis of protocol oddities.
# v. 0-1-9:  2001-10-01
#	         Reimplement pm and all subsidiary modules to run 
#	entirely within Python (excepting ether-wake and rmc calls).
#	There is only one config file, and it is in /etc/powerman.conf.
#	All the query and control types are governed each by its own
#	module, which is imported when the config file mentions it.
#	Specialized data is carried in objects defined in these 
#	modules.  Each module must have a SetDataClass for clusterwide 
#	type information, and a NodeDataClass for per node special
#	data.  In addition pm expects the NodeDataClass __init__ 
#	function to have the profile (self, type, vals) where 
#	type is a string and vals is a list of strings.  Similarly,
#	in SetDataClass.__init__(self, cluster) cluster as a reference
#	to powerman's global ClusterClass structure, which has 
#	information (like fanout) that may be needed in the low
#	level handler.  The following are also required:
#	SetDataClass.add(self, node)
#	SetDataClass.do_com(self)
#	node is reference to NodeClass object.  
#	There are small wrapper functions embodying the calls to
#	rmc and ether-wake, which are now located in the 
#	/usr/lib/powerman directory.  That directory no longer has 
#	subdirectories.  The pm program just holds command line 
#	processing and initialization code.  All the actual work is 
#	the new pm_classes module.  There is also a new pm_utils 
#	module that holds a few things like error handling and logging
#	that are usefull to all modules.  Finally, all the old man
#	pages have been removed in favor of just the pm.1 and 
#	powerman.conf.5 pages.
#                  Forthermore, the I/O to icebox units has been 
#	reimplemented using os.read/write.  All such I/O is now mediated
#       by a single "prompt" command.  The signal handling for the
#	alarm is with the prompt command and both are in the pm_utils
#       module.   Other minor changes and bug fixes.
####################################################################


	