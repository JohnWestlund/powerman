2008-06-09 Jim Garlick <garlick@llnl.gov>

	* src/powerman.c : Option changes:
	- change -q,--query option to -q,--query-all with no_arguments
	- add -Q,--query option with required_arguments
	- change -n,--node option to -n,--soft-all with no_arguments
	- add -N,--soft option with required_arguments
	- change -t,--temp option to -t,--temp-all with no_arguments
	- add -P,--temp option with required_arguments
	- change -b,--beacon option to -b,--beacon-all with no_arguments
	- add -B,--beacon option with required_arguments
	- change -d,--destination option to -h,--server-host
	- change -D,--device option to -d,--device-all with no_arguments
	- add -D,--device option with required_arguments

	* scripts/stonith : Reflect option changes above.

	* src/powerman.c : Cleanup:
	- deprecate "off" and "on" program name support
	- abbreviate usage() message to only the most common options
	- allow multiple commands to be run
	- add -Z,--dump-cmds option to list commands without executing

	* src/argv.c : Added argv_length(), argv_append().

	* test/targv.c : Sanity check for argv.c.

	* test/* : Tests that exercise the work above.

2008-06-04 Jim Garlick <garlick@llnl.gov>

	* src/powermand.c : Fix signal handling in test (coprocess) mode.

2008-06-02 Jim Garlick <garlick@llnl.gov>

	* : tag powerman-2.0

	* src/xregex.c : Allow main expression match information to be
	obtained.

	* src/device_pipe.c : Make forkpty() error fatal.

	* src/xpty.c : Call err_exit() not lsd_fatal_error() on error.

2008-06-01 Jim Garlick <garlick@llnl.gov>

	* src/xregex.c : Rework.

	* src/device.c, src/parse_tab.y : Rework regex calls.

	* src/device_private.h : Extract from device.h the stuff that 
	should not be exposed to powermand.c.

	* : More general cleanup of header files, copyright block, etc..

	* test/tregex.c, test/t05, test/t05.exp : Added tests for xregex.c.

	* test/vpcd.c : Remove pthreads support.

	* src/xpoll.c : Disable poll() on darwin.

2008-05-30 Jim Garlick <garlick@llnl.gov>

	* src/client.c : Allow instantiation with a single stdin/stdout
	client which causes daemon to terminate when it goes away.

	* src/powermand.c : Add --stdio and --force-notroot options.

	* src/powerman.c : Add --server-path and --config-path options
	which allow client and server to run together as coprocesses.

	* src/wrappers.c : Allow NULL ptyname argument to Forkpty().

	* src/error.c : Removed file::line from lsd error messages.

	* test/* : Add integrated tests.

	* configure.ac, src/Makefile.am, src/parse_* : Disable fatal 
	configure error if flex is not found.  Check in lex/yacc build 
	products so powerman can be built without those.

	* wrappers.[ch] : Many wrappers dropped, others renamed and
	split off to x*.[ch] files.

2008-05-23 Jim Garlick <garlick@llnl.gov>

	* autoconf.ac, src/powerman.c : Use HAVE_GENDERS_H for <genders.h>.

	* autoconf.ac, src/wrappers.c : Use HAVE_PTY_H for <pty.h>.

2008-05-22 Jim Garlick <garlick@llnl.gov>

	* parse_tab.y, parse_lex.l, Makefile.am : Use default automake
	rules for lex/yacc and rename files so they fit.

	* parse_tab.y, parse_lex.l : Removed deprecated config file syntax,
	which emitted warnings since 1.0.16 (Jan 2002).  Reformatted some
	lex code for readability.

	* autoconf.ac : Require flex as scaner is (currently) flex specific.

	* autoconf.ac, config/ac_genders.m4, src/Makefile.am, powerman.c : 
	Add --genders option.

	* src/powerman.c, src/powermand.c : Handle missing getopt_long().

2008-05-21 Jim Garlick <garlick@llnl.gov>

	* ChangeLog-1.0 : Updated to reflect trunk (1.0.32+)

	* htdocs, scripts/stonith-powerman, man/powerman-devices.7, 
	etc/*.dev, NEWS : Updated [copy from trunk].

	* config/ac_curl.m4, config/ac_readline.m4, config/ac_httppower.m4,
	src/Makefile.am, src/httppower.c : Support httppower [port from trunk].

	* src/parse.lex : Update white space rule [port from trunk].

	* src/parse.y, src/wrappers.c, src/client.c, src/powerman.c,
	src/powermand.c : Include limits.h. [port from trunk].

	* config/ac_forkpty.m4, src/device_pipe.c, src/wrappers.[ch] :
	Provide substitute forkpty() if missing (via Forkpty() wrapper).

	* src/client.c, src/powerman.c, src/powermand.c, Makefile.am :
	Stop defining POWERMAN_VERSION in CFLAGS and use VERSION from config.h.

	* config/ac_wrap.m4, src/parse_util.c, src/client.c : 
	Make tcp_wrappers optional.

	* man/powerman.1.in, config/ac_debug.m4, config/ac_genders.m4,
	config/ac_static_modules.m4, config/ac_powerman_module_dir.m4, 
	configure.ac, src/Makefile.am, src/powerman.c, src/ltdl.[ch], 
	src/powerman_options.h, src/powerman_options_genders.c :
	Drop modules, genders support (temporarily?) to focus on portability.

	* src/device.c, src/debug.[ch], src/wrappers.[ch], src/device_tcp.c :
	Fix compiler warnings.

	* src/wrappers.[ch] : Add Dprintf() wrapper to avoid glibc dependency.
	Add timersub() and timeradd() if undefined.

2006-11-16 Jim Garlick <garlick@llnl.gov>

	* ChangeLog : Start over for 2.0 branch.  Old moved to ChangeLog-1.0.

	* etc/bashfun.dev : New.

2006-11-15 Albert Chu <chu11@llnl.gov>

	* : Added autoconf/automake support globally.

	* man/powermand.1 : Renamed to powermand.8.  Adjust text appropriately.

	* man/powerman.1.in, powerman.conf.5, powerman.dev.5: Adjust SEE
	ALSO section for change in section for powermand.

	* src/parse.lex (yywrap): Add function to remove need to link to -lfl.

	* powerman.spec.in: Add man8 directory.

	* src/*.c : Load config.h appropriately.

	* src/config.h: Remove file.

	* src/powerman_options.h, src/powerman_options_genders.c,
	src/powerman.c, man/powerman.1.in: Add module support and -g support.

	* powerman.spec.in: Update with genders module.

	* : branched at 1.0.26+
