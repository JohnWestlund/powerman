.TH powerman-devices 1 "Release 1.0" "LLNL" "powerman-devices"
.SH NAME
PowerMan Device Configuration Notes
.SH DESCRIPTION
Following are notes on configuring various remote power controllers
and related equipment supported by PowerMan.
.SH CYCLADES TS-1000
A cyclades TS-1000 configured so that PowerMan can connect to
serial-port-based remote power control devices using telnet is set up
as follows:
.P
Attach console cable between laptop running minicom
and console port at 9600,8n1 and authenticate with 
default account: root/tslinux.
.P
Edit the following files (assumes no off-subnet routing or name service
required):
.TP
.I "/etc/portslave/pslave.conf"
.nf
conf.eth_ip      192.168.54.151
conf.eth_mask    255.255.255.0 
conf.dhcp_client 0
#
all.speed        9600
all.datasize     8
all.stopbits     1
all.parity       none
all.flow         none
all.dcd          0
all.DTR_reset    1
all.protocol     socket_server
all.authtype     none
#all.ipno
all.socket_port  7001+
#
s1.tty           ttyS1
s2.tty           ttyS2
s3.tty           ttyS3
s4.tty           ttyS4
s5.tty           ttyS5
s6.tty           ttyS6
s7.tty           ttyS7
s8.tty           ttyS8
s9.tty           ttyS9
s10.tty          ttyS10
s11.tty          ttyS11
s12.tty          ttyS12
s13.tty          ttyS13
s14.tty          ttyS14
s15.tty          ttyS15
s16.tty          ttyS16
.fi
.TP
.I "/etc/hostname"
cyclades-ts-test
.TP
.I "/etc/hosts"
.nf
127.0.0.1        localhost
192.168.54.151   cycaldes-ts-test
.fi
.P
Next, run 
.B "signal_ras hup"
and
.B saveconf
and finally, power cycle the unit.  It should be possible to configure
PowerMan to connect to hostname:7001 for port 1, hostname:7002 for port 2,
etc..
.SH "BAYTECH RPC-3 (non-NC models) (network port 23)"
Attach console cable between laptop running minicom
and console port at 9600,8n1.  Main menu should display.
.P
From main menu, select 3)...Configuration, then set IP parameters.
.P
From Configuration menu, select 5)...Access, then disable command
confirmation, set admin password to baytech, and enable prompt for 
password.  Exit Access menu by typing return.
.P
From Configuration menu, select 6)...Outlets.  Ensure that
1)...Outlet Status display is disabled, and 2)...Command Confirmation
is disabled.
.P
Exit back to main menu by typing return twice, then answer Y to the
Accept changes? prompt.
.SH "BAYTECH RPC-28-NC (serial 9600,8n1)"
Attach console cable between laptop running minicom
and console port at 9600,8n1.  Type return to get RPC-28> prompt.
Type Help for a list of commands.
.P
Select config.  Select 3)...Enable/Disable Confirmation and disable
confirmation.  Select 4)...Enable/Disable Status Menu and disable
status menu
.SH "LNXI ICEBOX V2 (network port 1010)"
Attach console cable between laptop running minicom
and console port at 9600,8n1.  Enter default password of icebox.
.TP
.I "net ip 192.168.54.153"
Sets IP address.
.TP
.I "net mask 255.255.255.0"
Sets network mask
.TP
.I "net gw 192.168.54.254"
Set default gateway.  Note: this may need to be set to an address in 
the same subnet as the ice box regardless of whether it is to be used or not.
.TP
.I "reboot"
Reboots the icebox.
.SH "LNXI ICEBOX V3 (network port 1010)"
Attach console cable between laptop running minicom
and console port at 9600,8n1.  Authenticate with default account admin/icebox.
Configuration is the same as the V2 ICE BOX.
.SH "APC MASTERSWITCH MODEL AP9606 (network port 23)"
Attach console cable between laptop running minicom
and console port (may be labeled ``advanced port'') at 2400,8n1.  
Press enter, then authenticate with default account apc/apc.
.P
Choose Network from main menu.
.P
Choose TCP/IP from Network menu, then diable BOOTP, and accept changes.
Set the IP address, subnet mask, and default gateway, and accept changes.  
.P
Pres ESC until the main menu appears, then select Logout.
.SH "WTI RPS10 (serial 9600,8n1)"
Set address of box using the rotary dial on the back.  The Master module must
be set to address 0.  Slave modules may be set to unique values from 1-9.  
The address corresponds to the plug name in the powerman.conf file.
.P
Setup switches on each module should be set to 9600 baud (sw1 down),
5 sec toggle delay (sw2 down), power up to previous state (sw3 down).
.SH "WTI NPS (network port 23)"
Attach console cable between laptop running minicom
and console port at 9600,8n1.  Try password "wti" if prompted.
.P
Select /N - View/set network parameters, then set the IP address,
subnet mask, and gateway.
.P
Select /G - General paramters, then disable command confirmation,
enable command echo, and set disconnect timeout to the maximum value
(30 minutes).
.P
Set password to "wti".
.SH "CYCLADES PM8 and PM8i (serial 9600,8n1)"
Attach console cable between laptop running minicom
and serial port 9600,8n1.  Press enter, then authenticate with 
default account admin/pm8.
.P
Run factory_defaults command.
.P
The PM8 can run in a mode where it can be daisy chained from a Cyclades
terminal server.  This mode is not yet supported by PowerMan.
.SH "IPMI (via Ipmipower)"
Supports IPMI based power control via FreeIPMI's 
.B Ipmipower.

Due to semantic differences between IPMI and traditional remote power
control devices, some power control operations may not seem to work
properly by default with
.B Powerman.  
For example, several IPMI power control operations are allowed to
return prior to the operation fully completing.  A machine that has
been powered off by IPMI may be later queried as being powered on.
This is because IPMI may successfully return from a power off
operation to the user, but the machine may elect to power itself off
at a later time.
  
In order to get around several of these issues, it is recommended that
the user configure
.B ipmipower 
with the --wait-until-on and --wait-until-off options.
With these options set,
.B ipmipower
will behave more like traditional remote power control devices.

In order to hide IPMI usernames and passwords from
.B ps(1), 
it is also recommended that the user configure the username and
password (and at your discretion, the above options) using the
.B ipmipower 
configuration file and not in the powerman.conf file.  Please see
.B ipmipower.conf(5)
for more information.

.SH "SEE ALSO"
powerman(1), powermand(1), powerman.conf(5)
