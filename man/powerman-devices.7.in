.TH powerman-devices 7 "@META_DATE@" "@META_ALIAS@" "@META_NAME@"
.SH NAME
powerman\(hydevices \- Powerman Device Configuration Notes
.SH DESCRIPTION
Following are notes on configuring various remote power controllers
and related equipment supported by PowerMan.
.SH CYCLADES TS-1000
To configure the Cyclades TS-1000 so that PowerMan can connect to
serial-port-based remote power control devices using telnet:
.P
Attach console cable between laptop running minicom
and console port at 9600,8n1 and authenticate with 
default account: root/tslinux.
.P
Edit the following files (assumes no off-subnet routing or name service
required):
.TP
.I "/etc/portslave/portslave.conf"
.nf
conf.eth_ip      192.168.54.151
conf.eth_mask    255.255.255.0 
conf.dhcp_client 0
#
all.speed        9600
all.datasize     8
all.stopbits     1
all.parity       none
all.flow         none
all.dcd          0
all.DTR_reset    1
all.protocol     socket_server
all.authtype     none
#all.ipno
all.socket_port  7001+
#
s1.tty           ttyS1
s2.tty           ttyS2
s3.tty           ttyS3
s4.tty           ttyS4
s5.tty           ttyS5
s6.tty           ttyS6
s7.tty           ttyS7
s8.tty           ttyS8
s9.tty           ttyS9
s10.tty          ttyS10
s11.tty          ttyS11
s12.tty          ttyS12
s13.tty          ttyS13
s14.tty          ttyS14
s15.tty          ttyS15
s16.tty          ttyS16
.fi
.TP
.I "/etc/hostname"
cyclades-ts-test
.TP
.I "/etc/hosts"
.nf
127.0.0.1        localhost
192.168.54.151   cycaldes-ts-test
.fi
.P
Next, run 
.B "signal_ras hup"
and
.B saveconf
and finally, power cycle the unit.  It should be possible to configure
PowerMan to connect to hostname:7001 for port 1, hostname:7002 for port 2,
etc..
.SH "MRV IN-REACH IR-8020"
To configure the In-Reach (formerly Xyplex) IR-8020 so that PowerMan can
connect to serial-port-based remote power control devices using telnet:
.PP
To reset configuration: attach terminal to any port, press button on front
with paper clip until all LED's light up; release, then hold again for
3-5 seconds until sweeping pattern stops; led's will count down,
then press return on terminal several times.
After \fIConfiguration in Progress\fR message, type \fIaccess\fR.
Then select \fI2. Modify unit configuration\fR, then \fI3. Initialize
server and port parameters\fR, then \fID\fR to use defaults, \fIS\fR
to save them, \fIX\fR to go back to the main menu, and \fS\fR to exit
saving config.  The terminal server will now reboot and obtain its network
config from BOOTP.
.PP
Telnet to port 2000 and at the \fILogin>\fR prompt, type \fIaccess\fR,
and anything you like at the \fIEnter username>\fR prompt.
At the \fIIn-Reach>\fR prompt, type \fIset priv\fR, then default password
\fIsystem\fR.  You should now have the \fIIn-Reach_Priv>\fR prompt.
Now enter the following:
.PP
.nf
define server change enabled
define login password "access"
define priv password "system"
define server parameter server check disabled
define po 1-16 autoconnect enabled
define po 1-16 inactivity logout disabled
define po 1-16 flow control disabled
define po 1-16 autobaud disabled
define po 1-16 autoprompt disabled
define po 1-16 message codes disabled
define po 1-16 internet connect disabled
define po 1-16 broadcast disabled
define po 1-16 input flow control disabled
define po 1-16 output flow control disabled
define po 1-16 loss notification disabled
define po 1-16 line editor disabled
define po 1-16 verification disabled
define po 1-16 access remote
define po 1-16 break disabled
define po 1-16 tel newline nul
define po 1-16 tel binary session mode pasthru
define po 1-16 default sessions mode pasthru
define po 1-16 tel csi escape disabled
define po 1-16 type ansi
define po 1-16 speed 115200
define po 1-16 char size 8
define po 1-16 parity none
define po 1-16 typeahead size 2048
define po 1-16 ip tcp window size 2048
.fi
.PP
To reboot, type
.PP
.nf
init del 1
.fi
.PP
It should be possible to configure PowerMan to connect to
hostname:(2000+(100*port), e.g. hostname:2100 for port 1,
hostname:2200 for port 2, etc..
.SH "BAYTECH RPC-3 (non-NC models) (network port 23)"
Attach console cable between laptop running minicom
and console port at 9600,8n1.  Main menu should display.
.PP
From main menu, select 3)...Configuration, then set IP parameters.
.PP
From Configuration menu, select 5)...Access, then disable command
confirmation, set admin password to baytech, and enable prompt for 
password.  Exit Access menu by typing return.
.P
From Configuration menu, select 6)...Outlets.  Ensure that
1)...Outlet Status display is disabled, and 2)...Command Confirmation
is disabled.
.P
Exit back to main menu by typing return twice, then answer Y to the
Accept changes? prompt.
.SH "BAYTECH RPC-28-NC (serial 9600,8n1)"
Attach console cable between laptop running minicom
and console port at 9600,8n1.  Type return to get RPC-28> prompt.
Type Help for a list of commands.
.P
Select config.  Select 3)...Enable/Disable Confirmation and disable
confirmation.  Select 4)...Enable/Disable Status Menu and disable
status menu
.SH "LNXI ICEBOX V2 (network port 1010)"
Attach console cable between laptop running minicom
and console port at 9600,8n1.  Enter default password of icebox.
.TP
.I "net ip 192.168.54.153"
Sets IP address.
.TP
.I "net mask 255.255.255.0"
Sets network mask
.TP
.I "net gw 192.168.54.254"
Set default gateway.  Note: this may need to be set to an address in 
the same subnet as the ice box regardless of whether it is to be used or not.
.TP
.I "reboot"
Reboots the icebox.
.SH "LNXI ICEBOX V3 (network port 1010)"
Attach console cable between laptop running minicom
and console port at 9600,8n1.  Authenticate with default account admin/icebox.
Configuration is the same as the V2 ICE BOX.
.SH "APC MASTERSWITCH (network port 23)"
Attach console cable between laptop running minicom
and console port (may be labeled ``advanced port'') at 2400,8n1.  
Press enter, then authenticate with default account apc/apc.
.P
Choose Network from main menu.
.P
Choose TCP/IP from Network menu, then diable BOOTP, and accept changes.
Set the IP address, subnet mask, and default gateway, and accept changes.  
.P
Pres ESC until the main menu appears, then select Logout.
.SH "WTI RPS10 (serial 9600,8n1)"
Set address of box using the rotary dial on the back.  The Master module must
be set to address 0.  Slave modules may be set to unique values from 1-9.  
The address corresponds to the plug name in the powerman.conf file.
.P
Setup switches on each module should be set to 9600 baud (sw1 down),
5 sec toggle delay (sw2 down), power up to previous state (sw3 down).
.SH "WTI NPS (network port 23)"
Attach console cable between laptop running minicom
and console port at 9600,8n1.  Try password "wti" if prompted.
.P
Select /N - View/set network parameters, then set the IP address,
subnet mask, and gateway.
.P
Select /G - General paramters, then disable command confirmation,
enable command echo, and set disconnect timeout to the maximum value
(30 minutes).
.P
Set password to "wti".
.SH "CYCLADES PM8 and PM8i (serial 9600,8n1)"
Attach console cable between laptop running minicom
and serial port 9600,8n1.  Press enter, then authenticate with 
default account admin/pm8.
.P
Run factory_defaults command.
.P
The PM8 can run in a mode where it can be daisy chained from a Cyclades
terminal server.  This mode is not yet supported by PowerMan.
.SH "Sun ILOM"
The dedicated ILOM serial port (SER MGT RJ-45) runs at 9600,8n1 and the 
default login is root/changeme.  Use a Sun/NETRA/Cisco RJ45 adapter to 
connect to Cyclades TS.
.P
The dedicated ILOM ethernet port (NET MGT RJ-45) can be configured for 
DHCP (the default) or static IP settings.  To configure static IP via 
the ILOM serial port, run:
.IP
.nf
    cd /SP/network
    set pendingipdiscovery=static
    set pendingipaddress=xxx.xxx.xxx.xxx
    set pendingipnetmask=xxx.xxx.xxx.xxx
    set pendingipgateway=xxx.xxx.xxx.xxx
    set commitpending=true
.fi
.P
The ILOM network configuration can alternatively be set up via the system
BIOS setup screen.  Hit F2 during boot to access BIOS setup, go to the
"Advanced" tab, select "IPMI 2.0 configuration" and "set LAN 
configuration".  Make your changes and commit them.
.SH "IPMI (via Ipmipower)"
IPMI based power control is supported via FreeIPMI's 
.B ipmipower.
It is configured by running
.B ipmipower
in coprocess mode in powerman.conf

Due to semantic differences between IPMI and traditional remote power
control devices, some power control operations may not seem to work
properly by default with
.B Powerman.  
For example, several IPMI power control operations are allowed to
return prior to the operation fully completing.  A machine that has
been powered off by IPMI may be later queried as being powered on.
This is because IPMI may successfully return from a power off
operation to the user, but the machine may elect to power itself off
at a later time.  In order to get around several of these issues, it
is recommended that the user configure
.B ipmipower 
with the
\fB\-\-wait\-until\-on\fR
and
\fB\-\-wait\-until\-off\fR
options.
With these options set,
.B ipmipower
will behave more like traditional remote power control devices.

In order to hide IPMI usernames and passwords from
.B ps(1), 
it is also recommended that the user configure the username and
password (and at your discretion, the above options) using the
FreeIPMI configuration file and not in the powerman.conf file.  Please
see the
.B ipmipower
section of the
.B freeipmi.conf(5)
manpage for more information.

Because IPMI usernames and passwords are sensitive, the default
FreeIPMI configuration file is only readable and writable by root.  This may
conflict with the default
.B powermand
daemon settings, thus making the configuration file non-readable.
Administrators may wish to run the
.B powermand
daemon as root or adjust the configuration file permissions as needed.

IPMI based beacon support is also supported since
.B ipmipower
0.7.9.
Users should be aware that not all motherboards support
physical system identification through an LED.

.SH "HP iLO"
The "hpilo" script supports the Integrated Lights-Out management processor
in HP ProLiant servers, including both rack-mount and blade servers.
Configure the iLO to allow Telnet access on port 23, and add a user "Admin"
with password "Admin".  You may have to reduce the minimum password length
on the Administration/Access/Options tab of the web interface.

.SH "HP MP"
The "hpmp" script supports the Management Processor in HP non-cellular,
rack-mount Integrity servers.  Configure the MP to allow Telnet access with the
"CM:SA" command, and make sure there's a user "Admin" with password "Admin".
If the MP enforces a minimum password length, you may have to use
"uc -all default" to restore the default Admin/Admin user.

.SH "HP MP (cellular)"
The "hpmpcell" script supports the Management Processor in HP mid-range
cellular servers.  Configure the MP to allow Telnet access with the
"CM:SA" command, and make sure there's a user "Admin" with password "Admin".

.SH "HP MP (Superdome)"
The "hpmpdome" script supports the Management Processor in HP Superdome
servers.  Configure the MP to allow Telnet access with the
"CM:SA" command, and make sure there's a user "Admin" with password "Admin".

.SH "HP MP (Integrity blades)"
The "hpmpblade" script supports the Management Processor in HP Integrity blade
servers.  Configure the MP to allow Telnet access with the "CM:SA" command, and
make sure there's a user "Admin" with password "Admin".

.SH "ORIGIN"
PowerMan was originally developed by Andrew Uselton on LLNL's Linux clusters.
This software is open source and distributed under the terms of the GNU GPL.

.SH "SEE ALSO"
.BR powerman (1),
.BR powermand (8),
.BR httppower (8),
.BR plmpower (8),
.BR vpcd (8),
.BR powerman.conf (5),
.BR powerman.dev (5),
.BR powerman-devices (7).
.PP
\fBhttp://www.pimpworks.org/xyplex/xyplex.html\fR
.PP
\fBhttp://sourceforge.net/projects/powerman\fR
