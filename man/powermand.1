\."#################################################################
\."$Id$
\."by Andrew C. Uselton <uselton2@llnl.gov> 
\."#################################################################
\."  Copyright (C) 2001-2002 The Regents of the University of California.
\."  Produced at Lawrence Livermore National Laboratory (cf, DISCLAIMER).
\."  Written by Andrew Uselton (uselton2@llnl.gov>
\."  UCRL-CODE-2002-008.
\."  
\."  This file is part of PowerMan, a remote power management program.
\."  For details, see <http://www.llnl.gov/linux/powerman/>.
\."  
\."  PowerMan is free software; you can redistribute it and/or modify it under
\."  the terms of the GNU General Public License as published by the Free
\."  Software Foundation; either version 2 of the License, or (at your option)
\."  any later version.
\."  
\."  PowerMan is distributed in the hope that it will be useful, but WITHOUT 
\."  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or 
\."  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License 
\."  for more details.
\."  
\."  You should have received a copy of the GNU General Public License along
\."  with PowerMan; if not, write to the Free Software Foundation, Inc.,
\."  59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
\."#################################################################
.\"
.TH PowerMan 1 "Release 1.0.0" "LLNL" "PowerMan"

.SH NAME
powermand \- power control and monitoring daemon

.SH SYNOPSIS
.B powermand
.I "[-options]"
.LP

.SH DESCRIPTION
.B powermand
allows power monitoring and power management on a 
cluster of nodes to be performed independent of the underlying hardware.
Options are described -in
.B OPTIONS 
below and targets in 
.B TARGET NODE LIST 
below.
.LP
For an option in 
.I [--on, --off, --reset, --cycle]
.B powermand
will power on, power off, reset, or power cycle, respectively, the 
target nodes.  If none of the above commands is provided 
.B powermand [--whoson, --whosoff]
queries the target nodes for their power status and prints the names of 
those that are on, one per line (but see -t and -r below).
.LP
.B powermand 
runs anywhere allowed by TCP wrappers and communicates with the 
.B powermandd daemon on a management workstation equipped with power 
monitoring and control hardware.
.LP

.SH TARGET NODE LIST OPTIONS
From here down I haven't even tried updating the man page.  Later.
.I "-w host,host,..."
Target the specified nodes.  No spaces are allowed in the comma-separated
list.  Substituting the "-" character for the list causes the target nodes
to be read from stdin, one per line.
.LP
.I "-a"
Target "all" nodes in the cluster.  
.B pm
determines the list of nodes in the cluster from the configuration file
(see FILES below).

.SH OTHER OPTIONS
.LP
.I "-c configfile"
Provide an alternate name or location for the configuration file.
.LP
.I "-f number"
Set the maximum concurrency for underlying utilities.  The default is 256.
.I "-l powermandir"
Provide an alternate location for the Powermand libraries.
.I "-L"
Log interactions to /tmp/powerman.conf.  N.B. Only the icebox module logs
its interactions at this time.
.LP
.I "-q"
be quiet, i.e. don't print error messages.
.LP
.I "-r"
reverse, i.e. print nodes that are off rather than on
.LP
.I "-t"
query the CPU temperature(s), if available, rather than the power status.
Output the node name followed by the temperature for the target nodes, one
node per line.  N.B.  This is only supported by the icebox module.  

.SH "FILES"
/usr/bin/pm
.br
/etc/powerman.conf
.br
$powermandir/<module>.py
.br
$powermandir/<utility-support>
.br

.SH "ENVIRONMENT"
The environment variable
.B POWERMANDIR
gives an alternative location for the powermand libraries and hardware specific
modules, overriding the default "/usr/lib/powermand".  The "-l" option, 
in turn, overrides the environment variable.  Similarly,
.B POWERMANDCONF
gives an alternative file for cluster configuration details.  It 
overrides the default "/etc/powerman.conf" and is, in turn, overridden 
by the "-c" option.   If the 
.B W_COL
(working collective) environment variable is set to a file name then 
the list of nodes is taken from that file, one per line.  "-a",
and "-w" override the working collective envirnment variable.  

.SH "ORIGIN"
Developed by Andrew  Uselton <useton2@llnl.gov> on LLNL's Alpha and
Intel Linux clusters.  Originally released for LLNL-only use pending 
review for distribution under GPL.

.SH "LIMITATIONS"
Most of the code for this utility is written in Python, and as such is
probably portable to other operating systems and hardware.  Some
localization may be required.  
.SH "SEE ALSO"
powerman.conf(5)
